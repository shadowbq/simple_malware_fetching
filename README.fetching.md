# Simple Malware Fetching

No big crazy thing here .. just simple bash wget/parallel/grep fetches

## Locations for Malware:

http://vxvault.net//URL_List.php

```
wget http://vxvault.net//URL_List.php

tail -n +4 ./URL_List.php > URL_List.txt
```


## Fetching using wget:

`wget -nc --timeout=25 -i URL_List.txt`

### Faster.. 

Interpolate a right trimmed list of URLS to wget without noise

`cat URL_List.txt | parallel --no-run-if-empty --no-notice --trim r --gnu "wget -nc --timeout=25 {}"`

## Other ways:

http://askubuntu.com/questions/103623/download-files-from-a-list

## Cleaning up duplicates:

Generates a list of checksums for any file that matches *

```
$ md5sum * > checklist.chk 
```

Find dupes using `fdupes` (apt-get install fdupes)

```
fdupes -r .
```

Find and remove duplicates

```
fdupes -N -d -r .
```

## Doing Additional things

```
find . -print0 | xargs -0 cmd -option1 -option2 --
```

Examples:

```
$ find . -print0 | xargs -0 file --
.:                                                 directory
./1201511261336435956.exe:                         PE32 executable (GUI) Intel 80386, for MS Windows
./dbust.exe:                                       PE32 executable (GUI) Intel 80386 Mono/.Net assembly, for MS Windows
./7u65j5hg.exe:                                    HTML document, ASCII text
./1201512232221001235.exe:                         PE32 executable (GUI) Intel 80386, for MS Windows
./10.exe:                                          PE32 executable (GUI) Intel 80386 Mono/.Net assembly, for MS Windows
./k76j5hg.exe:                                     PE32 executable (GUI) Intel 80386, for MS Windows
./1201601091457012416.exe:                         PE32 executable (GUI) Intel 80386, for MS Windows
./firefox.exe:                                     PE32 executable (GUI) Intel 80386 Mono/.Net assembly, for MS Windows
./java.exe:                                        PE32 executable (GUI) Intel 80386 Mono/.Net assembly, for MS Windows
./Grog_by_kolya_at_mirmuz_20151031_1446319217.exe: MS-DOS executable, MZ for MS-DOS
./host9.exe:                                       PE32 executable (GUI) Intel 80386, for MS Windows
./1201512260639527541.exe:                         PE32 executable (GUI) Intel 80386, for MS Windows
./URL_List.txt:                                    ASCII text, with CRLF line terminators
./1201512192145375782.exe:                         PE32 executable (GUI) Intel 80386 Mono/.Net assembly, for MS Windows
./34frgegrg.exe:                                   HTML document, ASCII text, with CRLF line terminators
./1201601091455416672.exe:                         PE32 executable (GUI) Intel 80386, for MS Windows
./xdg1:                                            ELF 32-bit LSB executable, Intel 80386, version 1 (GNU/Linux), statically linked, stripped
./0oi545gfgf.exe:                                  PE32 executable (GUI) Intel 80386, for MS Windows
./120151225174858648.exe:                          PE32 executable (GUI) Intel 80386 Mono/.Net assembly, for MS Windows
```
### Find files that are not PE32 samples

```
$  find . -type f -print0 | xargs -0 file -- |grep -v PE32
./URL_List.php:   ASCII text, with CRLF line terminators
./URL_List.txt:   ASCII text, with CRLF line terminators
```

### Rename files without extensions to .exe

```
find . -type f ! -name "*.*" -print0 |xargs -I {} -0 mv {} ./{}.exe
```

### Remove all non PE32 files

```
find . -type f -print0 | xargs -0 file -- |grep -v PE32 |grep -o '^\.\/[^:]*' |xargs -I {} rm -f {}
```
